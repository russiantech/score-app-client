import{r as n,T as d,z as u,a as m,j as s,S as x}from"./index-Bhp7YlUb.js";const h=()=>{const[e,l]=n.useState([]),[a,t]=n.useState(!0),o=n.useCallback(async()=>{try{t(!0);const r=await d.getMyCourses(),i=Array.isArray(r)?r:[];l(i)}catch(r){console.error(r),u.error("Failed to load courses")}finally{t(!1)}},[]);n.useEffect(()=>{o()},[o]);const c={total:e.length,active:e.filter(r=>r.is_active).length,students:e.reduce((r,i)=>r+(i.enrolled_count||0),0)};return{courses:e,loading:a,reload:o,stats:c}},f=({course:e})=>{const l=m();return s.jsx("div",{className:"col-12 col-sm-6 col-xl-6",children:s.jsx("div",{className:"card h-100 border-0 shadow-sm course-card",role:"button",onClick:()=>l(`/courses/${e.id}`),children:s.jsxs("div",{className:"card-body d-flex flex-column",children:[s.jsxs("div",{className:"d-flex justify-content-between align-items-start mb-2",children:[s.jsx("span",{className:"fw-semibold text-primary",children:e.code}),s.jsx("span",{className:`badge bg-${e.is_active?"success":"secondary"}`,children:e.is_active?"Active":"Inactive"})]}),s.jsx("h6",{className:"fw-bold mb-1",children:e.title}),s.jsx("p",{className:"text-muted small flex-grow-1",children:e.description?.slice(0,80)||"No description"}),s.jsxs("div",{className:"d-flex gap-2 mt-2",children:[s.jsxs("span",{className:"badge bg-info",children:[s.jsx("i",{className:"fa fa-users me-1"}),e.students_count??0]}),s.jsxs("span",{className:"badge bg-secondary",children:[s.jsx("i",{className:"fa fa-book-open me-1"}),e.lessons_count??0]})]})]})})})},j=({courses:e=[],loading:l})=>{const[a,t]=n.useState(""),o=n.useMemo(()=>e.filter(c=>c.title.toLowerCase().includes(a.toLowerCase())||c.code?.toLowerCase().includes(a.toLowerCase())||c.description?.toLowerCase().includes(a.toLowerCase())),[e,a]);return s.jsxs("div",{className:"card shadow-sm h-100 d-flex flex-column",children:[s.jsxs("div",{className:"card-header bg-light d-flex justify-content-between align-items-center",children:[s.jsxs("h6",{className:"mb-0 fw-semibold",children:[s.jsx("i",{className:"fa fa-book me-2 text-primary"}),"My Courses"]}),s.jsx("span",{className:"badge bg-primary",children:o.length})]}),s.jsxs("div",{className:"card-body d-flex flex-column gap-3",children:[s.jsxs("div",{className:"input-group input-group-sm",children:[s.jsx("span",{className:"input-group-text bg-white",children:s.jsx("i",{className:"fa fa-search text-muted"})}),s.jsx("input",{className:"form-control",placeholder:"Search courses...",value:a,onChange:c=>t(c.target.value)})]}),s.jsx("div",{className:"row g-3 overflow-auto",style:{maxHeight:"60vh"},children:l?s.jsx("div",{className:"text-center py-5 w-100",children:s.jsx("div",{className:"spinner-border text-primary"})}):o.length===0?s.jsx("div",{className:"text-center text-muted py-5",children:"No courses found"}):o.map(c=>s.jsx(f,{course:c},c.id))})]})]})},v=({stats:e,loading:l})=>{const a=[{label:"Total Courses",value:e?.total??0,icon:"fa fa-book",color:"primary"},{label:"Active Courses",value:e?.active??0,icon:"fa fa-check-circle",color:"success"},{label:"Students",value:e?.students??0,icon:"fa fa-users",color:"info"}];return s.jsx("div",{className:"row g-3",children:a.map(t=>s.jsx(x,{value:l?"â€¦":t.value,label:t.label,icon:t.icon,bgColor:t.color},t.label))})},g=()=>{const{courses:e,loading:l,stats:a}=h();return s.jsx("div",{className:"container-fluid",children:s.jsxs("div",{className:"row g-3",children:[s.jsx("div",{className:"col-12",children:s.jsx(v,{stats:a,loading:l})}),s.jsx("div",{className:"col-12",children:s.jsx(j,{courses:e,loading:l})})]})})};export{g as default};
